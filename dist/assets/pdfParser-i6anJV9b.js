const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdf-Bnx0QBbo.js","assets/index-BA74gOs0.js","assets/index-D5ub4ozn.css"])))=>i.map(i=>d[i]);
import{_ as m}from"./index-BA74gOs0.js";async function P(r){try{const t=await m(()=>import("./pdf-Bnx0QBbo.js").then(n=>n.p),__vite__mapDeps([0,1,2]));t.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-DKQKFyKK.js",import.meta.url).toString();const o=await r.arrayBuffer(),a=await t.getDocument({data:o}).promise;let e="";for(let n=1;n<=a.numPages;n++){const s=(await(await a.getPage(n)).getTextContent()).items.map(i=>i.str).join(" ");e+=s+`
`}return g(e)}catch(t){throw console.error("PDF parsing error:",t),new Error("Failed to parse PDF. Please ensure it is a valid PhonePe statement.")}}function g(r){const t=[],o=r.split(`
`);let a=1;return o.forEach(e=>{const n=/(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/,l=/₹?\s*(\d+(?:,\d+)*(?:\.\d{2})?)/g,c=e.match(n),s=[...e.matchAll(l)];if(c&&s.length>0){const i=c[1],d=parseFloat(s[0][1].replace(/,/g,"")),p=e.toLowerCase().includes("credit")||e.toLowerCase().includes("received"),u=f(e)||"Unknown Merchant";d>0&&d<1e6&&t.push({id:a++,date:h(i),merchant:u,amount:d,type:p?"credit":"debit",category:"Other"})}}),t.length>0?t:null}function f(r){return r.replace(/₹?\s*\d+(?:,\d+)*(?:\.\d{2})?/g,"").replace(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/g,"").replace(/\s+/g," ").trim().slice(0,50)||null}function h(r){const t=r.split(/[\/\-]/);if(t.length===3){const o=t[0].padStart(2,"0"),a=t[1].padStart(2,"0");return`${t[2].length===2?"20"+t[2]:t[2]}-${a}-${o}`}return new Date().toISOString().split("T")[0]}export{P as parsePDF};
